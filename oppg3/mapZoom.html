<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lise Holman</title>
    <!-- INCLUDE LEAFLET CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    <!-- INCLUDE LEAFLET SCRIPT LIBRARY -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style> 
        
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;1,400;1,600&family=Rubik:wght@400;600;700&display=swap');

        :root {
        --darkblue: #363B45; 
        /*0c1821*/
        --white: #fff;  
        --red: rgba(182, 16, 16, 0.9); 
        --blue: #535C6E; 
        --lightblue: #6E778A; 
        --grey: #706C6D;  
        --black: #000;  
        --bgColor: rgba(54, 59, 69, 0.9); 
        } 

        html {
            scroll-behavior: smooth; 
            background-color: var(--white); 
            font-family: 'Open Sans', sans-serif;  
            line-height: 1.5;
        } 

        .art{
            min-height: 100vh; 
            max-width: 500px; 
            padding: 1rem; 
            margin: 3rem auto 3rem auto; 
            color: var(--black);  
        }  

        .art #sitat{
            font-style: italic;
            font-size: 26px;
        }

        body {
            margin: 0;
            padding: 0;
        }

        div, article, section {
            box-sizing: border-box;
        }   

        #changingBg{
            background-size: cover; 
            background-position: center center; 
            background-repeat: no-repeat; 
            background-attachment: fixed;
        } 

        .scrollContainer1 {
            width: 100%; 
            min-height: 60vh; 
            overflow: hidden;  
            background-image: url("Cis05.JPG");
            transition: background-image 2s;
        }  
        
        #scrollHeader{
            margin: 65vh auto 70vh auto; 
            max-width: fit-content; 
            text-align: center; 
            font-size: 24px;   
            background-color: var(--bgColor); 
            color: var(--white);  
        }

        .scrollText {
            margin: 80vh auto; 
            max-width: fit-content;
            padding: 1rem;  
            background-color: var(--bgColor);  
            color: var(--white);
            border: 2px;
           
        }    

        #scrollHeader h1, .scrollText p{
            max-width: 500px;
        } 


        /* 
        #scrollHeader{
            margin: 65vh auto 70vh auto; 
            max-width: fit-content; 
            color: #fff; 
            text-align: center; 
            font-size: 24px;   
            background-color: var(--bgColor);
            box-shadow: 0px 0px 20px 35px var(--bgColor);
            
        }

        .scrollText {
            margin: 70vh auto; 
            max-width: fit-content;
            padding: 1rem;  
            color: #fff; 
            background-color: var(--bgColor);
            box-shadow: 0px 0px 20px 35px var(--bgColor);
        }    

        #scrollHeader h1, .scrollText p{
            max-width: 500px;
        }

        */ 

        #mapHeader{
            text-align: center; 
            font-size: 24px;
        }
        #scrollContainer {
            width: 100%;
            min-height: 80vh;
            z-index: 5;
            padding-bottom: 50vh;
            display: block;    
            overflow: hidden;
        }

        #mapContainer {
            width: 100%;
            height: 100vh;
            position: sticky;
            top: 0; 
        }

        .scrollBox {
            position: relative;
            display: block;
            margin: 80vh auto 80vh auto;
            z-index: 10;
            width: 90vw;
            max-width: 400px;
            
            
            padding: 0 0 1rem 1rem;
            color: #fff;   
            border-radius: 15px;  
            background: var(--bgColor); 
            box-shadow: 0 3px 10px var(--bgColor);
        }   

        article h3{
            padding-bottom: .5rem;
            border-bottom: 3px solid var(--red); 
            display: inline-block;
        }


        @media only screen and (min-width: 800px) {
            #start, #p2, #p4, #p6, #p8, #p10, #p12, #p14, #end{
                /*venstre*/ 
                margin: 0 0 80vh 2rem;
            } 

            #p1, #p3, #p5, #p7, #p9, #p11, #p13, #p15{
                /*høyre*/ 
                margin: 0 2rem 80vh auto;     
            } 
        }
    </style>
</head>
<body>  
    <header> 
        <section id="changingBg" class="scrollContainer1"> 

            <div  id="scrollHeader">
            <h1>Overskrift overskrift overskrift overskrift</h1> 
            </div>
            <div id="txt1" class="scrollText">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat.
                </p> 
            </div>
            
            <div id="txt2" class="scrollText">
                <p>lorem ipsumm Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt </p> 
            </div>
            
        </section>
        
    </header>
    <article class="art"> 
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p> 
        <p id="sitat">
            "lorem ipsumm Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod"
        </p> 
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.  Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p> 
    </article> 
    
    <div id="mapScroll">  
        <h2 id="mapHeader">Kart og tidslinje over prosjekter</h2>
        <div id="mapContainer"></div>
    <section id="scrollContainer">  
        
        <article class="scrollBox" id="start">
            <h3>The grocery stores of Halden</h3>
            <p>Scroll down to get a full overview of all the grocery stores in Halden.</p>
        </article>
        <article class="scrollBox" id="p1"> 
            <h3>1998</h3>
            <p>Do Re Mi barnehage Greåker</p> 
            <img src="Cis12.jpg">
        </article>
        <article class="scrollBox" id="p2"> 
            <h3>2003</h3>
            <p>Do Re Mi barnehage Fredrikstad</p>
        </article>
        <article class="scrollBox" id="p3"> 
            <h3>2005</h3>
            <p>Do Re Mi barnehage Sør-Afrika</p>
        </article>
        <article class="scrollBox" id="p4"> 
            <h3>2006</h3>
            <p>Hinkenhopp barnehage Greåker</p>
        </article>
        <article class="scrollBox" id="p5"> 
            <h3>2007</h3>
            <p>Do Re Mi barnehage Begby</p>
        </article> 
        <article class="scrollBox" id="p6"> 
            <h3>2009</h3>
            <p>Do Re Mi barnehage Halden</p>
        </article> 
        <article class="scrollBox" id="p7"> 
            <h3>2010</h3>
            <p>Do Re Mi barnehage Våler</p>
        </article> 
        <article class="scrollBox" id="p8"> 
            <h3>2011</h3>
            <p>Barnas Kulturhus Fredrikstad</p>
        </article> 
        <article class="scrollBox" id="p9"> 
            <h3>2012</h3>
            <p>Childrens international school Fredrikstad</p>
        </article> 
        <article class="scrollBox" id="p10"> 
            <h3>2015</h3>
            <p>Childrens international school Moss</p>
        </article> 
        <article class="scrollBox" id="p11"> 
            <h3>2018</h3>
            <p>Dibber International, Sollentuna</p>
        </article> 
        <article class="scrollBox" id="p12"> 
            <h3>2018</h3>
            <p>Dibber international, Rydebak</p>
        </article> 
        <article class="scrollBox" id="p13"> 
            <h3>2019</h3>
            <p>Children's international school Sarpsborg</p>
        </article> 
        <article class="scrollBox" id="p14"> 
            <h3>2019</h3>
            <p>Philini Instituttet Privatist skole</p>
        </article> 
        <article class="scrollBox" id="p15"> 
            <h3>2022</h3>
            <p>Christianslund barnehage Fredrikstad</p>
        </article>
        <article class="scrollBox" id="end">
            <p>This is a brief example of combining the visualization templates and map templates using Leaflet for moving the focal point and zoom of a map depending on what information is in the viewport.</p>
        </article>
    </section>  
</div>

   
    <article class="art">
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p>
    </article>
    
    <script> 


        //INITIATE MAP
        const centerLat = 59.2798008
        const centerLong = 10.9654856
        let map = L.map('mapContainer', {
            center: [centerLat, centerLong],
            zoom: 13,
            scrollWheelZoom: false
        })
        //SET MAP CONSTRUCTOR  
        
        
        L.tileLayer('https://opencache.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=norges_grunnkart_graatone&zoom={z}&x={x}&y={y}', {
            attribution: '<a href="http://www.kartverket.no/">Kartverket</a>' //ikoner??
        }).addTo(map) 
        /*
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);
        */
        //PLACES
        const places = [
            {name: "Do Re Mi barnehage Greåker", year: "2016", lat: 59.2668582, long: 11.032472},
            {name: "Do Re Mi barnehage Fredrikstad", year: "2016", lat: 59.2264158, long: 10.9197372},
            {name: "Do Re Mi barnehage Sør-Afrika", year: "2016", lat: 27.8913726, long: 29.9306531},
            {name: "Hinkenhopp barnehage Greåker", year: "2016", lat: 59.2758145, long: 11.0394061}, 
            {name: "Do Re Mi barnehage Begby", year: "2016", lat: 59.1282, long: 11.2745}, 
            {name: "Do Re Mi barnehage Halden", year: "2016", lat: 59.1119083, long: 11.2713187}, 
            {name: "Do Re Mi barnehage Våler", year: "2016", lat: 59.4957588, long: 10.8487267}, 
            {name: "Barnas Kulturhus Fredrikstad", year: "2016", lat: 59.2019594, long: 10.9597785}, 
            {name: "Children's international school Fredrikstad", year: "2016", lat: 59.2019594, long: 10.9597785}, 
            {name: "Children's international school Moss", year: "2016", lat: 59.440338, long: 10.6695922},
            {name: "Dibber International Sollentuna", year: "2016", lat: 59.4455791, long: 17.7549159}, 
            {name: "Dibber International Rydebak", year: "2016", lat: 55.9654904, long: 12.7516411}, 
            {name: "Children's international school Sarpsborg", year: "2016", lat: 59.2921097, long: 11.0930798}, 
            {name: "Philini Instituttet Privatist skole", year: "2016", lat: 59.2921097, long: 11.0930798}, 
            {name: "Christianslund Barnehage Fredrikstad", year: "2016", lat: 59.228028, long: 10.9248422}, 
            
        ] 

         //Function to check if element is in viewport
         function isInViewport(el) {
            const rect = el.getBoundingClientRect();
            return (
                (rect.top <= 0 && rect.bottom >= 0) || 
                (rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth))
            );
        }  
        
        const geojson = {
            type: "FeatureCollection", 
            //map laget med hjelp fra chatgpt
            features: places.map((place, index, array) => {
                
            const nextPlace = array[index + 1];
            //console.log(nextPlace)
            const coordinates = nextPlace
            ? [
                [place.long, place.lat],
                [nextPlace.long, nextPlace.lat]
            ]
            : [
                [place.long, place.lat]
              ];
                return { 
                type: "Feature",
                properties: {},
                geometry: {
                    coordinates: coordinates,
                    type: "LineString"
                }
                };
            })
        };  

        //console.log(geojson)
        /*

        const geojson = 
        {
        "type": "FeatureCollection",
        "features": [
            {
            "type": "Feature",
            "properties": {},
            "geometry": {
                "coordinates": [
          [places[0].long, places[0].lat],
          [places[1].long, places[1].lat]
        ],
        "type": "LineString"
      }
    },
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "coordinates": [
        [places[1].long, places[1].lat],
          [places[2].long, places[2].lat]
        ],
        "type": "LineString"
      }
    }, 
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "coordinates": [
        [places[2].long, places[2].lat],
          [places[3].long, places[3].lat]
        ],
        "type": "LineString"
      }
    }, 
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "coordinates": [
        [places[3].long, places[3].lat],
          [places[4].long, places[4].lat]
        ],
        "type": "LineString"
      }
    }, 
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "coordinates": [
        [places[4].long, places[4].lat],
          [places[5].long, places[5].lat]
        ],
        "type": "LineString"
      }
    },
   
  ]
}*/
        
        
        const geoJsonStyle = {
            "color": "#b61010",
            "weight": 3,
            "opacity": 0.5
        }
        //add GeoJson to map
        L.geoJSON(geojson, {
            style: geoJsonStyle,
            //Adding popups to geometric shapes from GeoJson
            onEachFeature: function (feature, layer) {
                layer.bindPopup(feature.properties.popupContent)
            }
        }).addTo(map)

        
        //SET MARKERS MAP
        //create custom icon:
        const circleIcon = L.icon({
            iconUrl: 'circle.png',
            iconSize: [30,30],
            iconAnchor: [15,15],
            popupAnchor: [0, -20]
        })
        const dotIcon = L.icon({
            iconUrl: 'dot.png',
            iconSize: [30,30],
            iconAnchor: [15,15],
            popupAnchor: [0, -20]
        }) 
        const markerIcon = L.icon({
            iconUrl: 'marker.png',
            iconSize: [40,40],
            iconAnchor: [20,40],
            popupAnchor: [0, -20]
        })



        places.map((place) => {
            L.marker([place.lat, place.long], {icon: markerIcon}).addTo(map).bindPopup(place.name)
        })
        //SCRIPT FOR CHANGING MAP LOCATION
        document.addEventListener('scroll', function () {
            if(isInViewport(document.getElementById("start"))) {
                map.flyTo([centerLat, centerLong], 10)
            }
            if(isInViewport(document.getElementById("p1"))) {
                map.flyTo([places[0].lat, places[0].long], 17)
            }
            if(isInViewport(document.getElementById("p2"))) {
                map.flyTo([places[1].lat, places[1].long], 17)
            }
            if(isInViewport(document.getElementById("p3"))) {
                map.flyTo([places[2].lat, places[2].long], 17)
            }
            if(isInViewport(document.getElementById("p4"))) {
                map.flyTo([places[3].lat, places[3].long], 17)
            }
            if(isInViewport(document.getElementById("p5"))) {
                map.flyTo([places[4].lat, places[4].long], 17)
            } 
            if(isInViewport(document.getElementById("p6"))) {
                map.flyTo([places[5].lat, places[5].long], 17)
            } 
            if(isInViewport(document.getElementById("p7"))) {
                map.flyTo([places[6].lat, places[6].long], 17)
            } 
            if(isInViewport(document.getElementById("p8"))) {
                map.flyTo([places[7].lat, places[7].long], 17)
            } 
            if(isInViewport(document.getElementById("p9"))) {
                map.flyTo([places[8].lat, places[8].long], 17)
            } 
            if(isInViewport(document.getElementById("p10"))) {
                map.flyTo([places[9].lat, places[9].long], 17)
            } 
            if(isInViewport(document.getElementById("p11"))) {
                map.flyTo([places[10].lat, places[10].long], 17)
            } 
            if(isInViewport(document.getElementById("p12"))) {
                map.flyTo([places[11].lat, places[11].long], 17)
            } 
            if(isInViewport(document.getElementById("p13"))) {
                map.flyTo([places[12].lat, places[12].long], 17)
            } 
            if(isInViewport(document.getElementById("p14"))) {
                map.flyTo([places[13].lat, places[13].long], 17)
            } 
            if(isInViewport(document.getElementById("p15"))) {
                map.flyTo([places[14].lat, places[14].long], 17)
            } 
            if(isInViewport(document.getElementById("end"))) {
                map.flyTo([centerLat, centerLong], 13)
            }
        }, {
            passive: true
        });  

         //Change background header 
        
         document.addEventListener('scroll', function () {
                if (isInViewport(document.getElementById("scrollHeader"))){
                    document.getElementById("changingBg").style.backgroundImage = "url(Cis05.JPG)"
                } 
                if(isInViewport(document.getElementById("txt1"))) {
                    document.getElementById("changingBg").style.backgroundImage = "url(Cis12.JPG)"
                } 
                if(isInViewport(document.getElementById("txt2"))) {
                    document.getElementById("changingBg").style.backgroundImage = "url(hus.JPEG)"
                }

            }, {
                passive: true
            }); 
            

       
    </script>
</body>
</html>